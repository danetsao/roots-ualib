var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function s(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function g(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function h(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}let p;function m(t){p=t}function b(){if(!p)throw new Error("Function called outside component initialization");return p}function y(t){b().$$.on_destroy.push(t)}function x(){const t=b();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const r=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach(e=>{e.call(t,r)})}}}const w=[],v=[],E=[],k=[],_=Promise.resolve();let C=!1;function T(t){E.push(t)}let A=!1;const j=new Set;function P(){if(!A){A=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];m(e),L(e.$$)}for(w.length=0;v.length;)v.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];j.has(e)||(j.add(e),e())}E.length=0}while(w.length);for(;k.length;)k.pop()();C=!1,A=!1,j.clear()}}function L(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(T)}}const N=new Set;let R,O;function S(t,e){t&&t.i&&(N.delete(t),t.i(e))}function z(t,e,n,o){if(t&&t.o){if(N.has(t))return;N.add(t),R.c.push(()=>{N.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function I(t){t&&t.c()}function M(t,n,c){const{fragment:i,on_mount:s,on_destroy:a,after_update:l}=t.$$;i&&i.m(n,c),T(()=>{const n=s.map(e).filter(r);a?a.push(...n):o(n),t.$$.on_mount=[]}),l.forEach(T)}function H(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function B(t,e){-1===t.$$.dirty[0]&&(w.push(t),C||(C=!0,_.then(P)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(e,r,c,i,s,a,u=[-1]){const d=p;m(e);const f=r.props||{},g=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:u};let h=!1;if(g.ctx=c?c(e,f,(t,n,...o)=>{const r=o.length?o[0]:n;return g.ctx&&s(g.ctx[t],g.ctx[t]=r)&&(g.bound[t]&&g.bound[t](r),h&&B(e,t)),n}):[],g.update(),h=!0,o(g.before_update),g.fragment=!!i&&i(g.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);g.fragment&&g.fragment.l(t),t.forEach(l)}else g.fragment&&g.fragment.c();r.intro&&S(e.$$.fragment),M(e,r.target,r.anchor),P()}m(d)}"function"==typeof HTMLElement&&(O=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){H(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}});const F=function(t){return fetch("https://wwwdev2.lib.ua.edu/wp-json/covid-counter/counts/"+t)},G=[];const q=function(e,n=t){let o;const r=[];function i(t){if(c(e,t)&&(e=t,o)){const t=!G.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),G.push(n,e)}if(t){for(let t=0;t<G.length;t+=2)G[t][0](G[t+1]);G.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(c,s=t){const a=[c,s];return r.push(a),1===r.length&&(o=n(i)||t),c(e),()=>{const t=r.indexOf(a);-1!==t&&r.splice(t,1),0===r.length&&(o(),o=null)}}}}(0);function J(e){let n,o,r,c,i,f,h;return{c(){n=u("button"),o=d("Entry"),r=u("br"),c=d("\n  +"),this.c=t,$(n,"padding","50px"),$(n,"font-size","20px"),$(n,"color","green"),n.disabled=i=e[0]||e[1]},m(t,i){a(t,n,i),s(n,o),s(n,r),s(n,c),f||(h=g(n,"click",e[2]),f=!0)},p(t,[e]){3&e&&i!==(i=t[0]||t[1])&&(n.disabled=i)},i:t,o:t,d(t){t&&l(n),f=!1,h()}}}function K(t,e,n){const o=x();let{loading:r=!1}=e,{error:c=!1}=e;return t.$set=t=>{"loading"in t&&n(0,r=t.loading),"error"in t&&n(1,c=t.error)},[r,c,function(){o("increment",{type:"entry"})}]}class Q extends O{constructor(t){super(),D(this,{target:this.shadowRoot},K,J,c,{loading:0,error:1}),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),P()))}static get observedAttributes(){return["loading","error"]}get loading(){return this.$$.ctx[0]}set loading(t){this.$set({loading:t}),P()}get error(){return this.$$.ctx[1]}set error(t){this.$set({error:t}),P()}}function U(e){let n,o,r,c,i,f,h;return{c(){n=u("button"),o=d("Exit"),r=u("br"),c=d("\n  -"),this.c=t,$(n,"padding","50px"),$(n,"font-size","20px"),$(n,"color","red"),n.disabled=i=e[0]||e[1]},m(t,i){a(t,n,i),s(n,o),s(n,r),s(n,c),f||(h=g(n,"click",e[2]),f=!0)},p(t,[e]){3&e&&i!==(i=t[0]||t[1])&&(n.disabled=i)},i:t,o:t,d(t){t&&l(n),f=!1,h()}}}function V(t,e,n){const o=x();let{loading:r=!1}=e,{error:c=!1}=e;return t.$set=t=>{"loading"in t&&n(0,r=t.loading),"error"in t&&n(1,c=t.error)},[r,c,function(){o("decrement",{type:"exit"})}]}customElements.define("covid-counter-incrementer",Q);class W extends O{constructor(t){super(),this.shadowRoot.innerHTML="<style>button{background:red;color:white;padding:50px;font-family:inherit;font-size:20px}</style>",D(this,{target:this.shadowRoot},V,U,c,{loading:0,error:1}),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),P()))}static get observedAttributes(){return["loading","error"]}get loading(){return this.$$.ctx[0]}set loading(t){this.$set({loading:t}),P()}get error(){return this.$$.ctx[1]}set error(t){this.$set({error:t}),P()}}function X(t){let e,n,o;return{c(){e=u("h2"),n=d("The count is "),o=d(t[3])},m(t,r){a(t,e,r),s(e,n),s(e,o)},p(t,e){8&e&&h(o,t[3])},d(t){t&&l(e)}}}function Y(t){let e,n;return{c(){e=u("pre"),n=d(t[2])},m(t,o){a(t,e,o),s(e,n)},p(t,e){4&e&&h(n,t[2])},d(t){t&&l(e)}}}function Z(e){let n;return{c(){n=u("h2"),n.textContent="Loading..."},m(t,e){a(t,n,e)},p:t,d(t){t&&l(n)}}}function tt(e){let n,o,r,c,i,g,$,p,m;function b(t,e){return t[1]?Z:t[2]?Y:X}let y=b(e),x=y(e);return g=new Q({props:{loading:e[1],error:e[2]}}),g.$on("increment",e[4]),p=new W({props:{loading:e[1],error:e[2]}}),p.$on("decrement",e[5]),{c(){n=u("h1"),o=d("Backend of "),r=d(e[0]),c=f(),x.c(),i=f(),I(g.$$.fragment),$=f(),I(p.$$.fragment),this.c=t},m(t,e){a(t,n,e),s(n,o),s(n,r),a(t,c,e),x.m(t,e),a(t,i,e),M(g,t,e),a(t,$,e),M(p,t,e),m=!0},p(t,[e]){(!m||1&e)&&h(r,t[0]),y===(y=b(t))&&x?x.p(t,e):(x.d(1),x=y(t),x&&(x.c(),x.m(i.parentNode,i)));const n={};2&e&&(n.loading=t[1]),4&e&&(n.error=t[2]),g.$set(n);const o={};2&e&&(o.loading=t[1]),4&e&&(o.error=t[2]),p.$set(o)},i(t){m||(S(g.$$.fragment,t),S(p.$$.fragment,t),m=!0)},o(t){z(g.$$.fragment,t),z(p.$$.fragment,t),m=!1},d(t){t&&l(n),t&&l(c),x.d(t),t&&l(i),H(g,t),t&&l($),H(p,t)}}}function et(t,e,n){let o;i(t,q,t=>n(3,o=t));let{location:r}=e,{credentials:c=!1}=e,{log:s=!0}=e;console.log(r);let a=!0,l=!1;function u(...t){s&&console.log(...t)}function d(t=0){return q.set(t),t}async function f(t){let e;n(1,a=!0),n(2,l=!1);try{e=await function(t,e,n){const o={...t,location:e};return console.log(o),fetch("https://wwwdev2.lib.ua.edu/wp-json/covid-counter/movements",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,location:e})})}(t,r)}catch(t){u("Error posting val",t),n(2,l=t)}return n(1,a=!1),e}async function g(){if(!r)return;let t,e;n(1,a=!0),u("Getting count..."+r),n(2,l=!1);try{t=await F(r),e=await t.json()}catch(t){u("Error getting count",t),n(2,l=t)}u("Got count!",e),d(e.count),n(1,a=!1)}var h;return h=()=>{},b().$$.after_update.push(h),y(async()=>Promise.all([])),setTimeout(g,1e3),t.$set=t=>{"location"in t&&n(0,r=t.location),"credentials"in t&&n(6,c=t.credentials),"log"in t&&n(7,s=t.log)},[r,a,l,o,function({detail:t}){u(" I Am Incremented",t),async function(t){await f(t),u("Posted Increment"),await g()}(t)},function({detail:t}){u("I Am Decremented",t),async function(t){await f(t),u("Posted Decrement"),await g()}(t)},c,s]}customElements.define("covid-counter-decrementer",W);class nt extends O{constructor(t){super(),D(this,{target:this.shadowRoot},et,tt,c,{location:0,credentials:6,log:7}),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),P()))}static get observedAttributes(){return["location","credentials","log"]}get location(){return this.$$.ctx[0]}set location(t){this.$set({location:t}),P()}get credentials(){return this.$$.ctx[6]}set credentials(t){this.$set({credentials:t}),P()}get log(){return this.$$.ctx[7]}set log(t){this.$set({log:t}),P()}}function ot(e){let n,o,r,c,i,g,$;return{c(){n=u("h1"),o=d("Frontend of "),r=d(e[0]),c=f(),i=u("h2"),g=d("Current Count is "),$=d(e[1]),this.c=t},m(t,e){a(t,n,e),s(n,o),s(n,r),a(t,c,e),a(t,i,e),s(i,g),s(i,$)},p(t,[e]){1&e&&h(r,t[0]),2&e&&h($,t[1])},i:t,o:t,d(t){t&&l(n),t&&l(c),t&&l(i)}}}function rt(t,e,n){let o;i(t,q,t=>n(1,o=t));let{location:r}=e,{log:c=!0}=e;function s(t=0){return q.set(t),t}return setTimeout((async function(){let t,e;try{t=await F(r),e=await t.json()}catch(t){!function(...t){c&&console.log(...t)}("Error getting count",t)}s(e.count)}),1e3),y(async()=>Promise.all([])),t.$set=t=>{"location"in t&&n(0,r=t.location),"log"in t&&n(2,c=t.log)},[r,o,c]}customElements.define("covid-counter-backend",nt);class ct extends O{constructor(t){super(),D(this,{target:this.shadowRoot},rt,ot,c,{location:0,log:2}),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),P()))}static get observedAttributes(){return["location","log"]}get location(){return this.$$.ctx[0]}set location(t){this.$set({location:t}),P()}get log(){return this.$$.ctx[2]}set log(t){this.$set({log:t}),P()}}function it(t){let e,n;return e=new ct({props:{location:t[0],log:t[3]}}),{c(){I(e.$$.fragment)},m(t,o){M(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.location=t[0]),8&n&&(o.log=t[3]),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function st(t){let e,n;return e=new nt({props:{location:t[0],credentials:t[2],log:t[3]}}),{c(){I(e.$$.fragment)},m(t,o){M(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.location=t[0]),4&n&&(o.credentials=t[2]),8&n&&(o.log=t[3]),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function at(e){let n,r,c,i;const s=[st,it],u=[];function f(t,e){return t[1]?0:1}return n=f(e),r=u[n]=s[n](e),{c(){r.c(),c=d(""),this.c=t},m(t,e){u[n].m(t,e),a(t,c,e),i=!0},p(t,[e]){let i=n;n=f(t),n===i?u[n].p(t,e):(R={r:0,c:[],p:R},z(u[i],1,1,()=>{u[i]=null}),R.r||o(R.c),R=R.p,r=u[n],r||(r=u[n]=s[n](t),r.c()),S(r,1),r.m(c.parentNode,c))},i(t){i||(S(r),i=!0)},o(t){z(r),i=!1},d(t){u[n].d(t),t&&l(c)}}}function lt(t,e,n){let{backend:o=!1}=e,{location:r}=e,{credentials:c=!1}=e,{log:i=!0}=e;return console.log(r),t.$set=t=>{"backend"in t&&n(1,o=t.backend),"location"in t&&n(0,r=t.location),"credentials"in t&&n(2,c=t.credentials),"log"in t&&n(3,i=t.log)},t.$$.update=()=>{1&t.$$.dirty&&n(0,r)},[r,o,c,i]}customElements.define("covid-counter-frontend",ct);class ut extends O{constructor(t){super(),D(this,{target:this.shadowRoot},lt,at,c,{backend:1,location:0,credentials:2,log:3}),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),P()))}static get observedAttributes(){return["backend","location","credentials","log"]}get backend(){return this.$$.ctx[1]}set backend(t){this.$set({backend:t}),P()}get location(){return this.$$.ctx[0]}set location(t){this.$set({location:t}),P()}get credentials(){return this.$$.ctx[2]}set credentials(t){this.$set({credentials:t}),P()}get log(){return this.$$.ctx[3]}set log(t){this.$set({log:t}),P()}}return customElements.define("covid-counter-app",ut),ut}();
//# sourceMappingURL=bundle.js.map
